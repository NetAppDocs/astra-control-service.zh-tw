---
sidebar: sidebar 
permalink: use/enable-acp.html 
keywords: Astra Control Provisioner install, acp, enable, astra trident upgrade, upgrade trident 
summary: 啟用 Astra Control Provisioner 以存取進階儲存資源配置與管理功能。 
---
= 啟用 Astra Control Provisioner
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/use/


[role="lead"]
Astra Trident 版本 23.10 及更新版本包含使用 Astra Control Provisioner 的選項、可讓獲授權的 Astra Control 使用者存取進階儲存資源配置功能。Astra Control Provisioner 除了提供標準 Astra Trident CSI 型功能之外、還提供這項延伸功能。您可以使用此程序來啟用和安裝 Astra Control Provisioner 。

您的 Astra Control Service 訂閱會自動包含 Astra Control Provisioner 使用授權。

Astra Control 的更新將取代 Astra Trident 做為儲存資源配置程式和 Orchestrator 、並成為 Astra Control 使用的必要項目。因此、強烈建議 Astra Control 使用者啟用 Astra Control Provisioner 。Astra Trident 將繼續保持開放原始碼、並以 NetApp 的新 CSI 和其他功能來發行、維護、支援及更新。

.如何知道我是否需要啟用 Astra Control Provisioner ？
如果您將叢集新增至先前未安裝 Astra Trident 的 Astra Control Service 、叢集將會標示為 `Eligible`。您先請 link:../get-started/add-first-cluster.html["將叢集新增至 Astra Control"]、 Astra Control Provisioner 將自動啟用。

如果您的叢集未標記 `Eligible`將會標示 `Partially eligible` 因為下列其中一項原因：

* 它使用的是舊版 Astra Trident
* 它使用的 Astra Trident 23.10 尚未啟用置備程式選項
* 這是一種不允許自動啟用的叢集類型


適用於 `Partially eligible` 案例中、請使用這些指示來手動為叢集啟用 Astra Control Provisioner 。

image:ac-acp-eligibility.png["在新增叢集工作流程中描述叢集資格的螢幕擷取畫面"]

.啟用 Astra Control Provisioner 之前
如果您現有的 Astra Trident 不含 Astra Control Provisioner 、而且想要啟用 Astra Control Provisioner 、請先執行下列步驟：

* * 如果您已安裝 Astra Trident 、請確認其版本位於四個版本的視窗 * ：如果 Astra Trident 位於 24.02 版的四個版本視窗內、您可以使用 Astra Control Provisioner 直接升級至 Astra Trident 24.02 。例如、您可以直接從 Astra Trident 23.04 升級至 24.02 。
* * 確認您的叢集具有 AMD64 系統架構 * ： Astra Control Provisioner 映像同時在 AMD64 和 ARM64 CPU 架構中提供、但 Astra Control 僅支援 AMD64 。


.步驟
. 存取 NetApp Astra Control 影像登錄：
+
.. 登入 Astra Control Service UI 並記錄 Astra Control 帳戶 ID 。
+
... 選取頁面右上角的圖示。
... 選擇* API存取*。
... 記下您的帳戶 ID 。


.. 從同一頁面選取 * 產生 API 權杖 * 、然後將 API 權杖字串複製到剪貼簿、並將其儲存在編輯器中。
.. 使用您偏好的方法登入 Astra Control 登錄：
+
[source, docker]
----
docker login cr.astra.netapp.io -u <account-id> -p <api-token>
----
+
[source, crane]
----
crane auth login cr.astra.netapp.io -u <account-id> -p <api-token>
----


. （僅限自訂登錄）請依照下列步驟將映像移至自訂登錄。如果您未使用登錄 , 請遵循中的 Trident 運算子步驟 <<no-registry,下一節>>。
+

NOTE: 您可以使用 Podman 而非 Docker 來執行下列命令。如果您使用的是 Windows 環境、建議您使用 PowerShell 。

+
[role="tabbed-block"]
====
.Docker
--
.. 從登錄中拉出 Astra Control Provisioner 映像：
+

NOTE: 所擷取的映像不支援多個平台、而且僅支援與擷取映像的主機相同的平台、例如 Linux AMD64 。

+
[source, console]
----
docker pull cr.astra.netapp.io/trident-acp:24.02.0 --platform <cluster platform>
----
+
範例：

+
[listing]
----
docker pull cr.astra.netapp.io/trident-acp:24.02.0 --platform linux/amd64
----
.. 標記影像：
+
[source, console]
----
docker tag cr.astra.netapp.io/trident-acp:24.02.0 <my_custom_registry>/trident-acp:24.02.0
----
.. 將映像推送至自訂登錄：
+
[source, console]
----
docker push <my_custom_registry>/trident-acp:24.02.0
----


--
.起重機
--
.. 將 Astra Control Provisioner 資訊清單複製到您的自訂登錄：
+
[source, crane]
----
crane copy cr.astra.netapp.io/trident-acp:24.02.0 <my_custom_registry>/trident-acp:24.02.0
----


--
====
. 判斷原始 Astra Trident 安裝方法是否使用。
. 使用您最初使用的安裝方法、在 Astra Trident 中啟用 Astra Control Provisioner ：
+
<stdin> 中的 unresolved 指令 - 包括： https://raw.githubusercontent.com/NetAppDocs/astra-control-center/main/_include/enable-acp-options-tabbed-block.adoc[]



.結果
Astra Control Provisioner 功能已啟用、您可以使用任何適用於所執行版本的功能。

安裝 Astra Control Provisioner 之後、在 Astra Control UI 中裝載置備程式的叢集將會顯示 `ACP version` 而非 `Trident version` 欄位和目前安裝的版本號碼。

image:ac-acp-version.png["在 UI 中描繪 ACP 版本位置的螢幕擷取畫面"]

.以取得更多資訊
* https://docs.netapp.com/us-en/trident/trident-managing-k8s/upgrade-operator-overview.html["Astra Trident 升級文件"^]

