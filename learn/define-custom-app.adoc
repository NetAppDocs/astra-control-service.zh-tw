---
sidebar: sidebar 
permalink: learn/define-custom-app.html 
keywords: custom app, labels, kubernetes labels, kubernetes resources, pods, define custom app 
summary: 建立自訂應用程式可讓您將Kubernetes叢集的元素群組成單一應用程式。 
---
= 定義自訂應用程式
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/learn/


[role="lead"]
建立自訂應用程式可讓您將Kubernetes叢集的元素群組成單一應用程式。

自訂應用程式可讓您更精細地控制要納入Astra Control作業的內容、包括：

* 複製
* Snapshot
* 備份
* 保護原則


在大多數情況下、您會想要在整個應用程式上使用Astra Control的功能。不過、您也可以建立自訂應用程式、透過指派給命名空間中Kubernetes物件的標籤來使用這些功能。

若要建立自訂應用程式、請前往「應用程式」頁面、然後選取「**+定義自訂應用程式」。

當您進行選擇時、Custom App（自訂應用程式）視窗會顯示哪些資源會納入或排除在自訂應用程式之外。這有助於確保您選擇正確的條件來定義自訂應用程式。

image:custom-app-included-not-included.png["「定義自訂應用程式」快顯視窗的快照、顯示自訂應用程式將包含和不會包含哪些資源"]

在上述範例中、自訂應用程式中會包含一項資源（標有「部署：加一」的Pod「Nginx-pod0」）。將排除兩個Pod（「Nginhin-pod」和「Nginge-pod 2」、兩者均標示為「部署：穩定」）。


NOTE: 自訂應用程式只能在單一叢集的指定命名空間內建立。Astra Control不支援自訂應用程式跨越多個命名空間或叢集的功能。

標籤是可指派給Kubernetes物件以供識別的金鑰/值配對。標籤可讓您更輕鬆地排序、組織及尋找Kubernetes物件。若要深入瞭解Kubernetes標籤、 https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/["請參閱Kubernetes官方文件"]。


WARNING: 相同資源的原則重疊、名稱不同、可能會造成資料衝突。如果您為資源建立自訂應用程式、請確定該應用程式並未複製或備份到任何其他原則之下。



== 範例：一次發行的個別保護原則

在此範例中、DevOps團隊正在管理一次一次性發行部署。他們的叢集有三個執行Ngin像 的Pod。其中兩個Pod專用於穩定版本。第三個pod是用於金箱版本。

該團隊的Kubernetes管理員將標籤「部署=穩定」新增至穩定的發行Pod。管理員也會將標籤「Deployment = Canary」新增至金級發行Pod。

image:show-pods-labels.png["執行「kubectl Get pod -names=nginsc-app -show-markes」的結果快照、顯示三個Pod上的Kubernetes標籤。"]

該團隊的穩定版本包括每小時快照和每日備份的需求。這種精簡版更為短暫、因此他們想要針對任何標示為「部署=資料」的項目、建立更具競爭力的短期保護原則。

為了避免可能的資料衝突、管理員建立了兩個自訂應用程式：一個用於正式發行版、另一個用於穩定發行版。如此可將兩個Kubernetes物件群組的備份、快照和複製作業分開進行。

管理員將叢集新增至Astra Control之後、下一步是定義自訂應用程式。為達成此目的、管理員可在「應用程式」頁面上選取「*+定義自訂應用程式*」按鈕。

在出現的快顯視窗中、管理員會將「devops-canary-deployment」設定為應用程式名稱。然後管理員在「**叢集*」下拉式清單中選擇叢集、再從「**命名空間*」下拉式清單中選擇應用程式的命名空間。

此時、管理員可以在「**標籤」欄位中輸入「部署=加一」、或從下列資源中選取該標籤。

在定義了用於一次性部署的自訂應用程式之後、管理員會重複此程序、以進行穩定的部署。

建立這兩個自訂應用程式之後、管理員可以將這些資源視為任何其他Astra Control應用程式。管理員可以複製資源、建立備份與快照、並根據Kubernetes標籤為每個資源群組建立自訂保護原則。
